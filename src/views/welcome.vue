<template>
  <div class="welcome">
    <div style="width: 16vw;margin-left: -16vw; float:left;padding-top: 5px;padding-left: 10px">
      <el-card class="box-card">
      <div class="card-content">

        <img
                src="http://127.0.0.1:8080/user/image?name=rect.png"

                title="直达仓库地址"
                alt
        />
        <!--&lt;!&ndash;<span>{{ greetings }}</span>&ndash;&gt;-->
        <div style="font-size: 24px;font-weight: bold;margin-top: 10px;">
          <div class="blue-divide" style="display: inline-block;height:18px"></div>
          <span style="display: inline-block;margin-left: 5px;">Maker</span>
        </div>
        <div style="font-size: 12px;color: #aaa;margin-top: 5px;">

          <span style="display: inline-block;"><i style="margin: 2px" class="el-icon-folder"></i>1335334505@qq.com</span>
        </div>
        <div style="font-size: 12px;color: #aaa;">

          <span style="display: inline-block;"><i style="margin: 2px" class="el-icon-mobile"></i>17751099102</span>
        </div>

      </div>
    </el-card>
      <el-card class="box-card" style="margin-top: 5px;">
      </el-card></div>
    <div style="width: 100%;margin-left: 10px;float: right;padding-left: 10px">
        <div class="inline" style=" width: 70%;background: #fff;border-radius: 5px;margin: 10px;height: calc(100vh - 94px);overflow-y: auto;">

                <div class="grey-card ">
                    <img  class="inline" src="http://127.0.0.1:8080/user/image?name=rect.png" />
                    <div  class="inline" style="margin-top: 5px;width: calc(100% - 100px)" >
                        <div style="width: 100%;">
                            <div class="blue-divide" style="display: inline-block;height:13px"></div>
                            <span style="margin-left: 5px;font-size: 18px;font-weight: bold">Bob</span></div>
                        <div style="margin-left: 10px;font-size: 12px;color: #aaa">2021-01-02 15:33</div>
                        <div style="background: #fff;border-radius: 5px;width: 100%;padding: 10px;font-size: 14px;margin-top: 10px;margin-bottom: 5px;">
                            <div style="color: #303030;font-weight: bold;">操作词库:《 四级高频词汇 》   <el-tag size="mini" style="margin-right: 5px">删除</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">添加</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">修改</el-tag></div>
                            <div style="margin-top: 5px">

                            </div>
                            <div style="  display:inline-block;*display:inline;*zoom:1;">
                                <div class="grey-divide-hor" ></div>
                                <div style="font-size: 12px">删除了部分非必要单词，修改部分错误单词\n添加新增高频词汇</div>
                            </div>

                        </div>

                    </div>
                </div>
                <el-divider></el-divider>
                <div class="grey-card ">
                    <img  class="inline" src="http://127.0.0.1:8080/user/image?name=rect.png" />
                    <div  class="inline" style="margin-top: 5px;width: calc(100% - 90px)" >
                        <div style="width: 100%;">
                            <div class="blue-divide" style="display: inline-block;height:13px"></div>
                            <span style="margin-left: 5px;font-size: 18px;font-weight: bold">Bob</span></div>
                        <div style="margin-left: 10px;font-size: 12px;color: #aaa">2021-01-02 15:33</div>
                        <div style="background: #fff;border-radius: 5px;width: 100%;padding: 10px;font-size: 14px;margin-top: 10px;margin-bottom: 5px;">
                            <div style="color: #303030;font-weight: bold;">操作词库:《 四级高频词汇 》   <el-tag size="mini" style="margin-right: 5px">删除</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">添加</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">修改</el-tag></div>
                            <div style="margin-top: 5px">

                            </div>
                            <div style="  display:inline-block;*display:inline;*zoom:1;">
                                <div class="grey-divide-hor" ></div>
                                <div style="font-size: 12px">删除了部分非必要单词，修改部分错误单词\n添加新增高频词汇</div>
                            </div>

                        </div>

                    </div>
                </div>
                <el-divider></el-divider>
                <div class="grey-card ">
                    <img  class="inline" src="http://127.0.0.1:8080/user/image?name=rect.png" />
                    <div  class="inline" style="margin-top: 5px;width: calc(100% - 90px)" >
                        <div style="width: 100%;">
                            <div class="blue-divide" style="display: inline-block;height:13px"></div>
                            <span style="margin-left: 5px;font-size: 18px;font-weight: bold">Bob</span></div>
                        <div style="margin-left: 10px;font-size: 12px;color: #aaa">2021-01-02 15:33</div>
                        <div style="background: #fff;border-radius: 5px;width: 100%;padding: 10px;font-size: 14px;margin-top: 10px;margin-bottom: 5px;">
                            <div style="color: #303030;font-weight: bold;">操作词库:《 四级高频词汇 》   <el-tag size="mini" style="margin-right: 5px">删除</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">添加</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">修改</el-tag></div>
                            <div style="margin-top: 5px">

                            </div>
                            <div style="  display:inline-block;*display:inline;*zoom:1;">
                                <div class="grey-divide-hor" ></div>
                                <div style="font-size: 12px">删除了部分非必要单词，修改部分错误单词\n添加新增高频词汇</div>
                            </div>

                        </div>

                    </div>
                </div>
                <el-divider></el-divider>
                <div class="grey-card ">
                    <img  class="inline" src="http://127.0.0.1:8080/user/image?name=rect.png" />
                    <div  class="inline" style="margin-top: 5px;width: calc(100% - 90px)" >
                        <div style="width: 100%;">
                            <div class="blue-divide" style="display: inline-block;height:13px"></div>
                            <span style="margin-left: 5px;font-size: 18px;font-weight: bold">Bob</span></div>
                        <div style="margin-left: 10px;font-size: 12px;color: #aaa">2021-01-02 15:33</div>
                        <div style="background: #fff;border-radius: 5px;width: 100%;padding: 10px;font-size: 14px;margin-top: 10px;margin-bottom: 5px;">
                            <div style="color: #303030;font-weight: bold;">操作词库:《 四级高频词汇 》   <el-tag size="mini" style="margin-right: 5px">删除</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">添加</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">修改</el-tag></div>
                            <div style="margin-top: 5px">

                            </div>
                            <div style="  display:inline-block;*display:inline;*zoom:1;">
                                <div class="grey-divide-hor" ></div>
                                <div style="font-size: 12px">删除了部分非必要单词，修改部分错误单词\n添加新增高频词汇</div>
                            </div>

                        </div>

                    </div>
                </div>
                <el-divider></el-divider>
                <div class="grey-card ">
                    <img  class="inline" src="http://127.0.0.1:8080/user/image?name=rect.png" />
                    <div  class="inline" style="margin-top: 5px;width: calc(100% - 90px)" >
                        <div style="width: 100%;">
                            <div class="blue-divide" style="display: inline-block;height:13px"></div>
                            <span style="margin-left: 5px;font-size: 18px;font-weight: bold">Bob</span></div>
                        <div style="margin-left: 10px;font-size: 12px;color: #aaa">2021-01-02 15:33</div>
                        <div style="background: #fff;border-radius: 5px;width: 100%;padding: 10px;font-size: 14px;margin-top: 10px;margin-bottom: 5px;">
                            <div style="color: #303030;font-weight: bold;">操作词库:《 四级高频词汇 》   <el-tag size="mini" style="margin-right: 5px">删除</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">添加</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">修改</el-tag></div>
                            <div style="margin-top: 5px">

                            </div>
                            <div style="  display:inline-block;*display:inline;*zoom:1;">
                                <div class="grey-divide-hor" ></div>
                                <div style="font-size: 12px">删除了部分非必要单词，修改部分错误单词\n添加新增高频词汇</div>
                            </div>

                        </div>

                    </div>
                </div>
                <el-divider></el-divider>
                <div class="grey-card ">
                    <img  class="inline" src="http://127.0.0.1:8080/user/image?name=rect.png" />
                    <div  class="inline" style="margin-top: 5px;width: calc(100% - 90px)" >
                        <div style="width: 100%;">
                            <div class="blue-divide" style="display: inline-block;height:13px"></div>
                            <span style="margin-left: 5px;font-size: 18px;font-weight: bold">Bob</span></div>
                        <div style="margin-left: 10px;font-size: 12px;color: #aaa">2021-01-02 15:33</div>
                        <div style="background: #fff;border-radius: 5px;width: 100%;padding: 10px;font-size: 14px;margin-top: 10px;margin-bottom: 5px;">
                            <div style="color: #303030;font-weight: bold;">操作词库:《 四级高频词汇 》   <el-tag size="mini" style="margin-right: 5px">删除</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">添加</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">修改</el-tag></div>
                            <div style="margin-top: 5px">

                            </div>
                            <div style="  display:inline-block;*display:inline;*zoom:1;">
                                <div class="grey-divide-hor" ></div>
                                <div style="font-size: 12px">删除了部分非必要单词，修改部分错误单词\n添加新增高频词汇</div>
                            </div>

                        </div>

                    </div>
                </div>
                <el-divider></el-divider>
                <div class="grey-card ">
                    <img  class="inline" src="http://127.0.0.1:8080/user/image?name=rect.png" />
                    <div  class="inline" style="margin-top: 5px;width: calc(100% - 90px)" >
                        <div style="width: 100%;">
                            <div class="blue-divide" style="display: inline-block;height:13px"></div>
                            <span style="margin-left: 5px;font-size: 18px;font-weight: bold">Bob</span></div>
                        <div style="margin-left: 10px;font-size: 12px;color: #aaa">2021-01-02 15:33</div>
                        <div style="background: #fff;border-radius: 5px;width: 100%;padding: 10px;font-size: 14px;margin-top: 10px;margin-bottom: 5px;">
                            <div style="color: #303030;font-weight: bold;">操作词库:《 四级高频词汇 》   <el-tag size="mini" style="margin-right: 5px">删除</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">添加</el-tag>
                                <el-tag size="mini" style="margin-right: 5px">修改</el-tag></div>
                            <div style="margin-top: 5px">

                            </div>
                            <div style="  display:inline-block;*display:inline;*zoom:1;">
                                <div class="grey-divide-hor" ></div>
                                <div style="font-size: 12px">删除了部分非必要单词，修改部分错误单词\n添加新增高频词汇</div>
                            </div>

                        </div>

                    </div>
                </div>
                <el-divider></el-divider>
            </div>
        <div class="inline right" style="width: 26%;margin: 5px;height: calc(100vh - 94px);">
            <el-card style="height: 30vh">
                <template #header>
                    <div class="card-header">
                        <span style="font-weight: bold;font-size: 15px">我创建的词库</span>
                    </div>
                </template>
                <div style="font-weight: bold;font-size: 14px;color: #409EFF;overflow-y: auto;height: 25vh;">
                    <p >日常必备<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(非公开)</span></p>
                    <el-divider></el-divider>
                    <p >四级高频词汇<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(公开)</span></p>
                    <el-divider></el-divider>
                    <p >词根记忆<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(非公开)</span></p>
                    <el-divider></el-divider>
                    <p >常用单词共享<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(公开)</span></p>
                    <el-divider></el-divider>
                    <p >冷门单词100+<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(公开)</span></p>
                    <el-divider></el-divider>
                </div>
            </el-card>
            <el-card style="height: 40vh;margin-top: 10px;">
                <template #header>
                    <div class="card-header">
                        <span style="font-weight: bold;font-size: 15px">我加入的词库</span>
                    </div>
                </template>
                <div style="font-weight: bold;font-size: 14px;color: #409EFF;overflow-y: auto;height: 35vh;">
                    <p >日常必备<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(非公开)</span></p>
                    <el-divider></el-divider>
                    <p >四级加强<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(公开)</span></p>
                    <el-divider></el-divider>
                    <p >词根记忆<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(非公开)</span></p>
                    <el-divider></el-divider>
                    <p >常用单词共享<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(公开)</span></p>
                    <el-divider></el-divider>
                    <p >冷门单词100+<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(公开)</span></p>
                    <el-divider></el-divider>
                    <p >冷门单词100+<span style="color:#aaa;font-size: 12px;font-weight:normal;margin-left: 5px;">(公开)</span></p>
                    <el-divider></el-divider>
                </div>
            </el-card>
        </div>

    </div>
  </div>

</template>

<script lang='ts'>
import Flop from "/@/components/Flop";
import { ref, computed, onMounted, nextTick } from "vue";
import { deviceDetection } from "/@/utils/deviceDetection";
import { echartsJson } from "/@/api/mock";
import {
  useEventListener,
  tryOnUnmounted,
  useTimeoutFn,
} from "@vueuse/core";
import * as echarts from "echarts";

let brokenLine: any = null; //折线图实例
export default {
  name: "welcome",
  components: {
    Flop,
  },
  setup() {
    let mobile = ref(deviceDetection());
    let date: Date = new Date();
    let loading = ref(true);

    setTimeout(() => {
      loading.value = !loading.value;
      nextTick(() => {
        initbrokenLine();
      });
    }, 2000);

    let greetings = computed(() => {
      if (date.getHours() >= 0 && date.getHours() < 12) {
        return "上午好";
      } else if (date.getHours() >= 12 && date.getHours() < 18) {
        return "下午好";
      } else {
        return "晚上好";
      }
    });

    let initbrokenLine = (): any => {
      // @ts-ignore
      brokenLine = echarts.init(document.getElementById("brokenLine"));
      brokenLine.clear(); //清除旧画布 重新渲染

      /*echartsJson().then(({ info }) => {
        brokenLine.setOption({
          title: {
            text: "上海 空气质量指数",
            left: "1%",
          },
          tooltip: {
            trigger: "axis",
          },
          grid: {
            left: "5%",
            right: "15%",
            bottom: "10%",
          },
          xAxis: {
            data: info.map(function (item) {
              return item[0];
            }),
          },
          yAxis: {},
          toolbox: {
            right: 10,
            feature: {
              dataZoom: {
                yAxisIndex: "none",
              },
              restore: {},
              saveAsImage: {},
            },
          },
          dataZoom: [
            {
              startValue: "2014-06-01",
            },
            {
              type: "inside",
            },
          ],
          visualMap: {
            top: 50,
            right: 10,
            pieces: [
              {
                gt: 0,
                lte: 50,
                color: "#93CE07",
              },
              {
                gt: 50,
                lte: 100,
                color: "#FBDB0F",
              },
              {
                gt: 100,
                lte: 150,
                color: "#FC7D02",
              },
              {
                gt: 150,
                lte: 200,
                color: "#FD0100",
              },
              {
                gt: 200,
                lte: 300,
                color: "#AA069F",
              },
              {
                gt: 300,
                color: "#AC3B2A",
              },
            ],
            outOfRange: {
              color: "#999",
            },
          },
          series: {
            name: "上海 空气质量指数",
            type: "line",
            data: info.map(function (item) {
              return item[1];
            }),
            markLine: {
              silent: true,
              lineStyle: {
                color: "#333",
              },
              data: [
                {
                  yAxis: 50,
                },
                {
                  yAxis: 100,
                },
                {
                  yAxis: 150,
                },
                {
                  yAxis: 200,
                },
                {
                  yAxis: 300,
                },
              ],
            },
          },
        });
      });*/
    };

    const openDepot = (): void => {
      window.open("https://github.com/xiaoxian521/vue-pure-admin");
    };

    onMounted(() => {
      nextTick(() => {
        useEventListener("resize", () => {
          if (!brokenLine) return;
          useTimeoutFn(() => {
            brokenLine.resize()
          }, 180);
        });
      });
    });

    tryOnUnmounted(() => {
      if (!brokenLine) return;
      brokenLine.dispose();
      brokenLine = null;
    });

    return {
      greetings,
      mobile,
      loading,
      openDepot,
    };
  },
};
</script>

<style lang="scss">

    .right{
        .el-card__body{
            padding-top: 0;
            padding-right: 0;
        }
        .el-divider{
            margin-top: 0;
            margin-bottom: 0;
        }
        .el-card__header{
            padding:10px;
            height: 5vh;
        }
    }


    .el-divider{
        margin-left: 10px;
        width: calc(100% - 20px);
    }
    .grey-card{
        padding-bottom: 10px;
        margin-left: 10px;
        margin-top: 10px;
        margin-right: 10px;
        width: calc(100% - 20px);
        background:#f0f2f5;
        border-radius: 5px;
        img{
            border-width: 2px;
            border-color: #e1e1e1;
            border-style: solid;
            margin-top: -10px;
            margin-left: -10px;
            width: 80px;height: 80px;
            border-bottom-right-radius: 100%;
            border-top-left-radius: 5px;
        }
    }
  .grid-content {
    border-radius: 4px;
    min-height: 36px;
  }
  .bg-purple {
    background: #d3dce6;
  }
  .bg-purple-light {
    background: #e5e9f2;
  }
  .grey-divide{
    width: 2px;
    height: 100%;
    background: #aaa;
    border-radius: 2px;
  }


.welcome {
  padding-left: 16vw;
  width: 100%;
  height: 100%;

  .card-content{

    width: 16vw;
    margin: -20px;
      img {

          display: block;
          width: 15vw;
          height: 15vw;
          border-radius: 2%;
          cursor: pointer;
      }
  }
  .top-content {
    padding: 5px;
    display: flex;
    justify-content: space-between;
    width: 100%;
    height: 180px;
    .left-mark {

      width: 16vw;
      display: flex;

    }
  }

  .box-card {
    width: 16vw;
    padding: 0.5vw;
    position: relative;

    #brokenLine {
      width: 100%;
      height: 50vh;
    }
  }
}
</style>
